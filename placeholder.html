<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuzu's Maze</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Righteous&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="persistent.css">
</head>
<body>
    <!-- Initials Input Modal -->
    <div id="playerInitialsModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Enter Your Initials</h2>
            </div>
            <div class="modal-body">
                <p>Enter your 3-letter initials to register your score! Game resets every 30 minutes with a new board!</p>
                <input type="text" id="playerInitialsInput" maxlength="3" placeholder="AAA">
                <button id="startGameBtn" class="control-btn">Start Game</button>
            </div>
        </div>
    </div>

    <header>
        <h1 id="gameTitle">Kuzu's Maze</h1>
        <div class="controls">
            <!-- <div id="playerDisplay">Player: <span id="currentPlayerInitials">---</span></div> -->
            <button id="helpBtn" class="control-btn">
                <span class="icon"><strong>?</strong></span>
            </button>
            <!-- <button id="resetAttemptsBtn" class="control-btn">
            Reset for New Player -->
              <!-- </button>
                  <button id="resetBoardBtn" class="control-btn">
        Reset Board
    </button> -->
        </div>
    </header>
    
    <div class="game-container">
        <div class="game-area">
            <div class="holder">
                <div class="container">
                    <div class="game-info">
                        <div id="nextGoal">Next Goal: 1</div>
                        <div id="attemptCounter">Attempt: 1</div>
                    </div>

                    <div class="game-layout">
                        <div class="game-board" id="gameBoard">
                            <!-- Game tiles will be generated here by JavaScript -->
                        </div>

                        <div class="controls">
                            <button id="restartBtn" class="control-btn">
                                Restart Attempt
                            </button>
                        </div>

                        <div class="power-bubbles">
                            <div id="extraLifeBubble" class="power-bubble pink hidden">
                                Extra Life
                            </div>
                            <div id="anyOrderBubble" class="power-bubble teal hidden">
                                Next
                            </div>
                            <div id="diagonalBubble" class="power-bubble indigo hidden">
                                Diagonal 
                            </div>
                            <div id="warpBubble" class="power-bubble cyan hidden">
                                Warping
                            </div>
                            <div id="grappleBubble" class="power-bubble purple hidden">
                                Grappling
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="scoreBoard" class="score-board">
                <h2>Top 10 Scores</h2>
                <table id="scoreTable">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Initials</th>
                            <th>Attempts</th>
                        </tr>
                    </thead>
                    <tbody id="scoreTableBody">
                        <!-- Scores will be populated dynamically -->
                    </tbody>
                </table>
                
                <div class="score-board-footer">
                    <button id="resetAttemptsBtn" class="control-btn">
                        Reset for New Player
                    </button>
                </div>
            </div>
        
       
    </div>

    <!-- Victory Modal -->
    <div id="victoryModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header" style="justify-content: center;">
                <h2 style="text-align: center;">ðŸŽ‰ Congratulations! ðŸŽ‰</h2>
            </div>
            <div class="modal-body">
                <p style="text-align: center;">You've completed the sequence!</p>
                <p style="text-align: center;">Number of attempts: <span id="finalTryCount"></span></p>
            </div>
            <div class="modal-footer" style="display: flex; gap: 1rem; justify-content: center;">
                <button id="closeVictoryBtn" class="control-btn">Close</button>
                <button id="copyResultBtn" class="control-btn">Copy Result</button>
                <button id="revealBoardAfterWin" class="control-btn">Reveal Full Board</button>
                <button id="newGameAfterWin" class="control-btn">New Game</button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal hidden">
        <div class="modal-content">
            <div style="text-align: center;" class="modal-header">
                <h2 style="text-align: center;">How to Play Kuzu's Maze</h2>
            </div>
            <div class="modal-body">
                <div class="help-content">
                    <!-- Help content from original implementation -->
                    <div class="tile-group">
                        <div class="tiles-row">
                        <p>In Kuzu's Maze, your goal is collect all of the Flowers hidden throughout the maze. You'll utilize Power-ups to navigate the Maze while trying to avoid falling victim to lurking Vine Monsters.</p>
                        
                        <h3>Gameplay</h3>
                        <p>Explore the maze by entering from one of the edges (selecting a tile on the edge of the grid). You can select tiles in orthogonal directions (up, down, left, right) from your current tile. Tiles that are flipped over are no longer available to move to, with the exception of Stepping Stones.</p>
                        
                        <h3>Stepping Stones</h3>
                        <div class="help-tile">
                            <img style="height: 72px; width: 72px" src="src/walkthrough.svg" alt="stepping stone tile" class="tile-image">
                        </div>
                        <p>Stepping Stones are free spaces and are helpful for finding a Successful Path. After revealing a Stepping Stone, you can move through it as many times as you'd like, allowing for easier movement and avoiding turn-ending faults.</p>
                        
                        <h3>Goal Flowers</h3>
                        <div class="help-tile">
                            <img style="height: 72px; width: 72px" src="src/flower1.svg" alt="1" class="tile-image">
                            <img style="height: 72px; width: 72px" src="src/flower2.svg" alt="2" class="tile-image">
                            <img style="height: 72px; width: 72px" src="src/flower3.svg" alt="3" class="tile-image">
                            <img style="height: 72px; width: 72px" src="src/flower4.svg" alt="4" class="tile-image">
                            <img style="height: 72px; width: 72px" src="src/flower5.svg" alt="5" class="tile-image">
                        </div>
                        <p>Reveal all of the flowers in ascending order 1 to 5 to win the game.</p>
                        
                        <h3>Faults</h3>
                        <div class="help-tile">
                            <img style="height: 72px; width: 72px" src="src/death.svg" alt="11" class="tile-image">
                        </div>
                        <p>A player's turn ends when a fault occurs. Faults include revealing a Flower in the wrong order, becoming stuck with no available moves (requiring a restart) or when they reveal a Vine Monster.</p>
                        
                        <h3>Power-Ups</h3>
                        <p>There are a variety of power-ups to help you navigate the Maze.</p>

                        <!-- Rest of help content remains the same as original implementation -->
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="display: flex; justify-content: center;">
                <button id="closeHelpBtn" class="control-btn">Close</button>
            </div>
        </div>
    </div>

    <script src="persistent.js"></script>
    

</body>
</html>